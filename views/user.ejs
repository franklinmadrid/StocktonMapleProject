<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%= title%></title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">

    <script id="searcher" data-search="<%= user%>" type="text/javascript">
        var script_tag = document.getElementById('searcher');
        var search_term = script_tag.getAttribute("data-search");

        // This will not work on localhost, replace this when we have wrb server up and running
        /*
        var apiURL = 'mongodb://localhost:27017/Maple/trees';
        fetch(apiURL).then(response => {
            return response.json();
        }).then(data => {
            dataSet = data;
            console.log(data);
        }).catch(err => {

        });
        */


        // Example data of what would be returned by api call
        var dataSet =
        [{
          "_id": "000001",
          "circumf": 60,
          "stemCount": 10,
          "tappingDate": {
            "$date": "2021-03-08T00:00:00Z"
          },
          "tapHeight": 40,
          "user": "admin"
        },{
          "_id": "000002",
          "circumf": 60,
          "stemCount": 10,
          "tappingDate": {
            "$date": "2020-04-20T00:00:00Z"
          },
          "tapHeight": 40,
          "user": "admin"
        },{
          "_id": "1111111",
          "circumf": 80,
          "stemCount": 3,
          "tappingDate": {
            "$date": "2021-03-01T00:00:00Z"
          },
          "tapHeight": 50,
          "user": "tim"
        },{
          "_id": "121212",
          "circumf": 75,
          "stemCount": 11,
          "tappingDate": {
            "$date": "2021-03-05T00:00:00Z"
          },
          "tapHeight": 50,
          "user": "tim"
        },{
          "_id": "999999",
          "circumf": 120,
          "stemCount": 20,
          "tappingDate": {
            "$date": "2021-03-11T00:00:00Z"
          },
          "tapHeight": 60,
          "user": "tim"
        },{
          "_id": "000000",
          "circumf": 200,
          "stemCount": 1,
          "tappingDate": {
            "$date": "2021-02-16T00:00:00Z"
          },
          "tapHeight": 1,
          "user": "tim"
        }]

        console.log(dataSet);
    </script>

    <script type="text/javascript" class="init">
        $(document).ready(function() {
            $('#treeTable').DataTable( {
                autoWidth: false,
                lengthChange: false,
                ordering: false,
                pageLength: 5,
                data: dataSet,
                columns: [
                    { "data" : "_id" },
                    { "data": "circumf" },
                    { "data": "stemCount" },
                    { "data": "tappingDate.$date" },
                    { "data": "tapHeight" }
                ],
                columnDefs: [
                    { className: "dt-head-center", targets: [ 0,1,2,3,4 ] }
                ]
            } );
        } );
    </script>
</head>
<body>
    <div style="margin-left: 20px">
        <p>UserName: <%=user._id%></p>
        <p>Email: <%= user.email%></p>
        <p>Hashed Password: <%=user.password%></p><br>
        <a href="/logout">Logout</a>
        <a style="margin-left: 10px" href='/registerTree'>Register a Tree</a>
        <a style="margin-left: 10px" href='/registerSyrup'>Register Syrup Processing</a>
    </div>
    <div class="container">
        <table id="treeTable" class="display center">
            <thead>
                <tr>
                    <th>Tree ID</th>
                    <th>Circumference (Inches)</th>
                    <th>Stem Count</th>
                    <th>Tapping Date</th>
                    <th>Tap Height</th>
                </tr>
            </thead>
            <tbody style="text-align:center">
            </tbody>
        </table>
    </div>

    <!--
    <div class="container" style="margin-top: 50px; margin-left: 20px">
        <table class="table table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Tree ID</th>
              <th scope="col">Stem Count</th>
              <th scope="col">Circumference</th>
              <th scope="col">Tapping Date</th>
              <th scope="col">Tap Height</th>
              <th scope="col">First Flow Date</th>
              <th scope="col">Last Flow Date</th>
            </tr>
          </thead>
          <tbody>
            <tr class="clickable" onclick="window.location='https://www.google.com'">
              <th scope="row">1</th>
              <td>000001</td>
              <td>3</td>
              <td>60</td>
              <td>06/25/20</td>
              <td>40</td>
              <td>07/14/20</td>
              <td>08/10/20</td>
            </tr>
            <tr class="clickable" onclick="window.location='https://www.google.com'">
              <th scope="row">2</th>
              <td>000002</td>
              <td>5</td>
              <td>65</td>
              <td>08/25/20</td>
              <td>40</td>
              <td>09/14/20</td>
              <td>10/10/20</td>
            </tr>
            <tr class="clickable" onclick="window.location='https://www.google.com'">
              <th scope="row">3</th>
              <td>000003</td>
              <td>2</td>
              <td>50</td>
              <td>05/1/20</td>
              <td>40</td>
              <td>06/28/20</td>
              <td>08/12/20</td>
            </tr>
            <tr class="clickable" onclick="window.location='https://www.google.com'">
              <th scope="row">4</th>
              <td>000004</td>
              <td>7</td>
              <td>80</td>
              <td>04/30/20</td>
              <td>35</td>
              <td>05/17/20</td>
              <td>09/22/20</td>
            </tr>
            <tr class="clickable" onclick="window.location='https://www.google.com'">
              <th scope="row">5</th>
              <td>000005</td>
              <td>9</td>
              <td>35</td>
              <td>10/19/20</td>
              <td>40</td>
              <td>11/10/20</td>
              <td>12/25/20</td>
            </tr>
          </tbody>
        </table>
    </div>
    -->
</body>
</html>


